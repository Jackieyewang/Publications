---
title: 'Bitcoin Optech Newsletter #136'
permalink: /zh/newsletters/2021/02/17/
name: 2021-02-17-newsletter-zh 
slug: 2021-02-17-newsletter-zh 
type: newsletter
layout: newsletter
lang: en/zh
---
This week’s newsletter describes the development of a new constant-time algorithm for generating and verifying transaction signatures, mentions a proposal to stop processing unsolicited transactions, summarizes a proposed BIP for setting up multisig wallets, shares insight from a discussion about managing escrows over LN, links to renewed discussion about bidirectional upfront LN fees, and mentions a new protocol for mitigating the risk of malicious hardware wallets. Also included are our regular sections with news about updated clients and services, announcements of new software releases and release candidates, and descriptions of notable changes in popular Bitcoin infrastructure software.
本周的Bitcoin Optech介绍了一种新的恒定时间的生成和验证签名的算法，提及了一个停止处理未经请求事务的提案，总结了设置多签钱包的BIP，分享了从管理闪电网络上托管物的讨论中的提炼的一些思考，提及了降低恶意硬件钱包风险的新协议。此外还有我们常规的新闻章节部分，包括客户端和服务的更新，新版本和候选版本发布的公告，以及主流比特币基础设施软件的重要更新。

## News
● Faster signature operations: Russell O’Connor and Andrew Poelstra published a [blog post](https://medium.com/blockstream/a-formal-proof-of-safegcd-bounds-695e1735a348) announcing the implementation of an algorithm that can speed up Bitcoin Core’s signature verification by 15%. It can also reduce by 25% the amount of time it takes to generate signatures while still using a constant-time algorithm that reduces the risk of sidechannel data leaks, which may be of special interest to hardware wallet developers whose devices have limited resources.

新闻

● 快速签名操作：Russell O’Connor 和 Andrew Poelstra 发表了一篇[博客](https://medium.com/blockstream/a-formal-proof-of-safegcd-bounds-695e1735a348)，宣布实现了一种算法，可以将Bitcoin Core的签名验证效率提升15%。同时，它还可以将生成签名的时间降低25%，同时保持使用常数时间算法，以降低侧信道数据泄漏的风险。硬件钱包的开发者应对此特别感兴趣，因为硬件钱包的计算资源极其有限。

The blog post describes the development of the new algorithm by Daniel J. Bernstein and Bo-Yin Yang, an implementation of it for libsecp256k1 by Peter Dettman (mentioned in [Newsletter #111](https://bitcoinops.org/en/newsletters/2020/08/19/#proposed-uniform-tiebreaker-in-schnorr-signatures)), a novel and CPU-efficient method by Pieter Wuille for computing the maximum number of steps the algorithm requires to achieve its goal in constant time, a variation on Bernstein’s and Yang’s algorithm by Gregory Maxwell that’s even more efficient, and the implementation of Wuille’s bound verification program in the Coq proof assistant by O’Connor and Poelstra to help ensure its correctness. Dettman’s original implementation for libsecp256k1 has been updated with the recent developments by Wuille as [PR #831](https://github.com/bitcoin-core/secp256k1/issues/831).

这篇博文描述了由Daniel J. Bernstein 和 Bo-Yin Yang提出的新算法的进展；由Peter Dettman（[第111期](https://bitcoinops.org/en/newsletters/2020/08/19/#proposed-uniform-tiebreaker-in-schnorr-signatures)Bitcoin Optech曾介绍）完成的针对libsecp256k1 的实现；由Pieter Wuille提出的一种新颖的、节省CPU的方法，用于计算算法在恒定时间内实现其目标所需的最大步数；由Gregory Maxwell提出的更高效的Bernstein和Yang的算法变体；以及由O'Connor和Poelstra在Coq证明助手中实现Wuille的约束验证程序，以帮助确保其正确性。Wuille 在 [PR #831](https://github.com/bitcoin-core/secp256k1/issues/831) 的进展中更新了 Dettman针对libsecp256k1 的原始实现。

● Proposal to stop processing unsolicited transactions: normally nodes expect to receive the announcement of a new transaction in a P2P protocol inv message. If the node is interested in the transaction (e.g. it hasn’t previously received it from another peer), it requests the transaction using a getdata message and the broadcaster replies with the transaction in a tx message. However, for almost a decade, some light clients and other software have skipped the inv and getdata steps and proceed to just send unsolicited tx messages ([example](https://github.com/bitcoinj/bitcoinj/blob/7d2d8d7792ec5f4ce07ff82980b4e723993221e8/core/src/main/java/org/bitcoinj/core/TransactionBroadcast.java#L145)).
停止处理未经请求事务的提案：节点通常希望在P2P协议的inv消息中收到新事务的公告。如果节点对此事务有兴趣（例如此前从未从其它节点收到该事务）,它需要事务使用「getdata」消息，广播者使用tx消息来应答。然而，在这十年当中，一些轻客户端和其它软件都跳过了inv和getdata的步骤，仅发送未经请求的tx消息（[例子](https://github.com/bitcoinj/bitcoinj/blob/7d2d8d7792ec5f4ce07ff82980b4e723993221e8/core/src/main/java/org/bitcoinj/core/TransactionBroadcast.java#L145)）。


This week, Antoine Riard [posted](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018391.html) to the Bitcoin-Dev mailing list a proposal to stop processing such unsolicited tx messages. As discussed in a [Bitcoin Core PR](https://github.com/bitcoin/bitcoin/issues/20277), this will give a node more control over when it receives and processes transactions, giving it an additional way to limit the impact of peers that send expensive-to-validate transactions. Riard is proposing this change be made possibly as early as the next major version of Bitcoin Core, version 22.0.
本周，Antoine Riard在比特币开发者邮件列表中[发表](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018391.html)了一个提案，建议停止处理这些未经请求的tx消息。正如在[Bitcoin Core PR](https://github.com/bitcoin/bitcoin/issues/20277)中所讨论，这将给节点更多的控制权，让它在接收和处理事务的时候，有新方法来限制那些发送昂贵的验证事务的节点的影响。Riard提议这一变更最早可在比特币核心的下一个主要版本，即22.0版本中进行。

The downside of this approach is that all clients that currently send unsolicited tx messages won’t be able to send transactions unless they are upgraded before the last few 0.21.x or earlier versions of Bitcoin Core leave the network (or other Bitcoin implementations that act similarly). It usually takes several years for an old version to completely leave the network, so there should be plenty of time to accomplish client upgrades. We encourage the developers of affected clients to read the proposal and consider commenting on it.
此方案的缺点是，目前所有发送未经请求的tx消息的客户端将无法发送交易，除非它们在最后几个0.21.x或更早版本的Bitcoin Core离开网络之前升级（或Bitcoin的实现）。旧版本通常需要几年时间才能完全离开网络，所以应该有足够的时间来完成客户端的升级。我们鼓励受影响客户端的开发者阅读该提案并对其发表评论。

● Securely setting up multisig wallets: Hugo Nguyen [posted](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-February/018385.html) to the Bitcoin-Dev mailing list a draft BIP that describes how wallets, particularly hardware wallets, can securely exchange the information necessary to become signers for a multisig wallet. The information that needs to be exchanged includes the script template to use (e.g. P2WSH with 2-of-3 keys required to sign) and each signer’s [BIP32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) extended public key (xpub) at the key path it plans to use for signing.
安全设置多签钱包： Hugo Nguyen 在比特币开发者邮件列表[提出](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki)一个BIP草稿，该草稿描述了钱包尤其是硬件钱包如何在多签钱包的签名者间安全地交换信息。这些需要交换的信息包括使用的脚本模板（例如2-3门限的P2WSH）以及每个签名者的[BIP32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki)扩展公钥的密钥路径（xpub）

Briefly, Nguyen’s proposal (developed in correspondence with several hardware wallet producers) has a coordinator initiate the multisig federation process by choosing a script template and generating a private encryption and authentication credential. Those parameters are shared with the member wallets, who choose an appropriate key path and return its xpub along with a signature generated by its corresponding private key. The set of {identifying_parameters, key_path, xpub, signature} are encrypted and returned to the coordinator by each wallet. The coordinator then combines them into an [output script descriptor](https://bitcoinops.org/en/topics/output-script-descriptors/) that is encrypted and passed back to each member wallet, who verifies their xpub is included and then stores the descriptor as a script template they’re willing to sign for.
简单来说，Nguyen的提案（与一些硬件钱包制造商共同提出）有一个协调人通过选择脚本模板以及私有加密和认证凭证来初始化多签组的流程。这些参数通过成员的钱包共享，成员选择合适的密钥路径并提供其xpub与对应私钥的签名。每个成员的钱包将集合{identifying_parameters, key_path, xpub, signature} 加密后返回给协调人。协调人将这些参数组合起来，并将加密后的[输出脚本描述符](https://bitcoinops.org/en/topics/output-script-descriptors/)返回给每个成员的钱包。成员分别验证他们的xpub包含在其中，并将描述符存储成他们愿意签名的脚本模板。

The proposal received a significant amount of discussion on the mailing list, and some changes are planned. We’ll monitor the discussion for significant updates as the proposal matures and gets closer to implementation.
该提案在邮件列表中引发了大量的讨论，并计划进行一些修改。我们将观察讨论中的重要更新，以便随着提案的成熟逐渐迈向实施。

● Escrow over LN: a discussion [started](https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-June/002028.html) on the Lightning-Dev mailing over a year ago about creating non-custodial onchain escrows for LN saw [renewed discussion](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002948.html) this past week. A particular standout in the discussion was a [post](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002955.html) by ZmnSCPxj that uses one of [De Morgan’s laws](https://en.wikipedia.org/wiki/De_Morgan's_laws) for boolean statements to greatly simplify the construction of escrows—and [possibly](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002970.html) many other LN-based contracts—with the tradeoff of requiring a seller to post a bond before receiving payment. ZmnSCPxj’s idea requires an upgrade of LN to use [PTLCs](https://bitcoinops.org/en/topics/ptlc/), which is not currently expected until after [taproot](https://bitcoinops.org/en/topics/taproot/) activates.
闪电网络上的托管：一年多前，在Lightning-Dev邮件列表上[发起](https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-June/002028.html)了关于为闪电网络创建非托管链上托管的[讨论](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002948.html)，在上周讨论继续。讨论中引人关注的是ZmnSCPxj的一个[帖子](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002955.html)，他使用[德摩根定律](https://en.wikipedia.org/wiki/De_Morgan's_laws)中的一个布尔语句法则，大大简化了托管——[可能](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002970.html)还有许多其他基于闪电网络的合约--的构建，但代价是要求卖方在收到付款前提交保证金。ZmnSCPxj的想法需要升级闪电网络以使用[PTLCs](https://bitcoinops.org/en/topics/ptlc/)，目前预计要等到[taproot](https://bitcoinops.org/en/topics/taproot/)激活后才能实现。

● Renewed discussion about bidirectional upfront LN fees: Joost Jager [restarted](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002958.html) Lightning-Dev mailing list discussion about adding LN service fees that charge spenders and receivers for the time they consume using a channel’s limited availability of funding (“liquidity”) and concurrent payment capacity (“HTLC slots”). Jager builds on a previous proposal (see [Newsletter #122](https://bitcoinops.org/en/newsletters/2020/11/04/#bi-directional-upfront-fees-for-ln)), extending its fixed fees with fees proportional to payment processing duration (“hold fees”). The proposal received moderate discussion, with one [concern](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002967.html) being a reduction in sender/receiver privacy. The underlying issue here has been [known](https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-August/000135.html) for five years and discussed at length many times, so we expect discussion to continue.
重新讨论双向预付闪电网络费用问题。Joost Jager[重启](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002958.html)了闪电网络开发者邮件列表中关于增加闪电网络服务费的讨论，向花费者和接受者收取的这一服务费将由他们使用通道中的有限资金（"流动性"）和并行支付能力能力（"HTLC插槽"）所消耗的时间决定。Jager以之前的提案为基础（见[通讯#122](https://bitcoinops.org/en/newsletters/2020/11/04/#bi-directional-upfront-fees-for-ln)），将其固定费用扩展到与支付处理时间成比例的费用（"占有费用"）。该建议得到了适度讨论，其中一个[关注点](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002967.html)是将减少付款人/收款人的隐私。[这一问题](https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-August/000135.html)已经存在了五年，并经过了多次详细的讨论，因此我们希望讨论能够继续下去。

● Anti-exfiltration: Andrew Poelstra and Jonas Nick published a blog [post](https://medium.com/blockstream/anti-exfil-stopping-key-exfiltration-589f02facc2e) about a security technique being implemented for the Shift Crypto [BitBox02](https://shiftcrypto.ch/bitbox02/) and Blockstream [Jade](https://blockstream.com/jade/) hardware wallets. The goal is to allow both a hardware wallet and the computer controlling it to each be assured that the nonce used to generate a signature is actually an unguessable value. This prevents malicious hardware wallet firmware from generating nonces known to the firmware author, which the author could combine with one of the device’s transaction signatures found onchain to derive its private keys, allowing them to spend any other bitcoins controlled by those keys. The post describes the technique used, which was previously mentioned in a mailing list thread about this subject almost a year ago (see Newsletters [#87](https://bitcoinops.org/en/newsletters/2020/03/04/#proposal-to-standardize-an-exfiltration-resistant-nonce-protocol) and [#88](https://bitcoinops.org/en/newsletters/2020/03/11/#exfiltration-resistant-nonce-protocols)).
● 反渗透。Andrew Poelstra和Jonas Nick[发表](https://medium.com/blockstream/anti-exfil-stopping-key-exfiltration-589f02facc2e)了一篇博客文章，介绍了正在为Shift Crypto [BitBox02](https://shiftcrypto.ch/bitbox02/)和Blockstream [Jade](https://blockstream.com/jade/)硬件钱包实施的一项安全技术。其目标是让硬件钱包和与之相连的计算机签名时生成的nonce均是一个不可猜测的值。这可以防止恶意的硬件钱包固件生成固件作者已知的nonce，作者可以将这些nonce与链上相应的此设备的事务签名结合起来，从而计算出私钥，便可以花费这些私钥控制的所有比特币。该帖子描述了所使用的技术，该技术曾在近一年前的一个邮件列表线程中提到过这个问题（见通讯[#87](https://bitcoinops.org/en/newsletters/2020/03/04/#proposal-to-standardize-an-exfiltration-resistant-nonce-protocol)和[#88](https://bitcoinops.org/en/newsletters/2020/03/11/#exfiltration-resistant-nonce-protocols)）。

## Changes to services and client software

In this monthly feature, we highlight interesting updates to Bitcoin wallets and services.

服务以及客户端软件的更新

本月关于比特币的功能变化中，我们将重点介绍比特币钱包和服务的有意思的更新。

● Blockstream announces LNsync: [LNsync](https://blockstream.com/2021/01/22/en-lnsync-getting-your-lightning-node-up-to-speed-quickly/) allows Lightning wallets that were offline for a while to quickly download recent updates to LN topology in order to optimally route a payment to its destination. An open source plugin, [historian](https://github.com/lightningd/plugins/tree/master/historian), provides this functionality for C-Lightning users.
Blockstream宣布推出[LNsync](https://blockstream.com/2021/01/22/en-lnsync-getting-your-lightning-node-up-to-speed-quickly/)：对于离线一段时间的Lightning钱包，LNsync能够使其快速下载闪电网络的最新更新，以便优化其支付路由。一个开源插件[historian](https://github.com/lightningd/plugins/tree/master/historian)为C-Lightning用户提供了这个功能。

● Rust light client Nakamoto released: Alexis Sellier released [Nakamoto](https://cloudhead.io/nakamoto/), a “high-assurance Bitcoin light-client implementation in Rust, with a focus on low resource utilization, modularity and security” based on [compact block filters](https://bitcoinops.org/en/topics/compact-block-filters/).
Rust轻客户端Nokamoto发布：Alexis Sellier发布了"[Nakamoto](https://cloudhead.io/nakamoto/)"，这是一个基于[简洁区块过滤器](https://bitcoinops.org/en/topics/compact-block-filters/)，“使用Rust实现的高保障比特币轻客户端，专注于更低的资源占用，模块化和安全”。

● Blockstream Satellite broadcasting LN data and Bitcoin Core source: Blockstream’s Satellite, in addition to broadcasting Bitcoin block chain data, now includes the [Bitcoin Core source code](https://blockstream.com/2021/02/02/en-blockstream-provides-backup-satellite-broadcast-for-bitcoin-core-source-code/), code for a satellite-optimized Bitcoin fork ([Bitcoin Satellite](https://github.com/Blockstream/bitcoinsatellite)), and [LN gossip data](https://blockstream.com/2021/01/29/en-new-blockstream-satellite-updates/).
Blockstream Satellite广播了LN数据和比特币Core团队维护的源码：Blockstream的Satellite除了广播比特币区块链数据外，现在还包括[比特币Core团队维护的源码](https://blockstream.com/2021/02/02/en-blockstream-provides-backup-satellite-broadcast-for-bitcoin-core-source-code/)、为卫星广播优化了的比特币分叉（版本为[Bitcoin Satellite](https://github.com/Blockstream/bitcoinsatellite)）代码和[LN gossip数据](https://blockstream.com/2021/01/29/en-new-blockstream-satellite-updates/)。

● Blockstream Green implements CSV: Green Wallet previously used nLockTime as a wallet recovery mechanism, requiring users to receive backup emails with pre-signed transactions from Blockstream after each transaction in order to recover funds. By [implementing an OP_CHECKSEQUENCEVERIFY (CSV) recovery mechanism](https://blockstream.com/2021/01/25/en-blockstream-green-bitcoin-wallets-now-using-checksequenceverify-timelocks/), wallets can now be recovered without needing transaction-specific backup files or associating an email address with the wallet.
Blockstream Green实现CSV：Green Wallet此前使用nLockTime作为钱包恢复机制，要求用户在每笔交易后接收Blockstream发来的，含有预签名交易的备份邮件，以便在需要的时候恢复资金。 通过实现[OP_CHECKSEQUENCEVERIFY (CSV)恢复机制](https://blockstream.com/2021/01/25/en-blockstream-green-bitcoin-wallets-now-using-checksequenceverify-timelocks/)，现在可以恢复钱包，而不需要特定的交易备份文件或将电子邮件地址与钱包关联。

● Muun 2.0 released: The [2.0 release](https://medium.com/muunwallet/announcing-muun-2-0-d61b0844dc0a) of mobile Bitcoin and Lightning wallet Muun includes multisig, wallet recovery features, and also open sources the Android and iOS mobile apps.
Muun 2.0发布：面向比特币和闪电网络的移动端钱包，Muun，的[2.0版本](https://medium.com/muunwallet/announcing-muun-2-0-d61b0844dc0a)包含了多签，钱包恢复功能，还开源了Android和iOS移动端应用源码。

● Joinmarket 0.8.1 released: The [0.8.1 release](https://github.com/JoinMarket-Org/joinmarket-clientserver/blob/master/docs/release-notes/release-notes-0.8.1.md) contains additional [PSBT](https://bitcoinops.org/en/topics/psbt/) support for PSBTs created externally, [signet](https://bitcoinops.org/en/topics/signet/) support, and a fix for uppercase address support with [BIP21](https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki) URIs (see [Newsletter #127](https://bitcoinops.org/en/newsletters/2020/12/09/#thwarted-upgrade-to-uppercase-bech32-qr-codes). A terminal-based UI for JoinMarket, [JoininBox](https://github.com/openoms/joininbox), was also updated to support 0.8.1.
Joinmarket 0.8.1发布：[0.8.1版本](https://github.com/JoinMarket-Org/joinmarket-clientserver/blob/master/docs/release-notes/release-notes-0.8.1.md)包含了对外部创建的[PSBT](https://bitcoinops.org/en/topics/psbt/)的额外支持，[书签](https://bitcoinops.org/en/topics/signet/)支持，以及对[BIP21](https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki) URI的大写地址支持（见订阅邮件的[#127](https://bitcoinops.org/en/newsletters/2020/12/09/#thwarted-upgrade-to-uppercase-bech32-qr-codes)）。 JoinMarket的一个基于终端的UI，[JoininBox](https://github.com/openoms/joininbox)，也更新到支持0.8.1。

● VBTC allows withdrawals via LN and segwit batches: VBTC, a Vietnamese exchange, [added a batched segwit withdrawal option](https://blog.vbtc.exchange/2021/batched-segwit-withdrawals-tutorial-5) after recently also [enabling Lightning withdrawals](https://blog.vbtc.exchange/2020/how-to-withdraw-bitcoin-lightning-network-tutorial-3). The incentivized segwit batch withdrawal occurs once a week, targeting a time when mempools are less likely to have large transaction backlogs.
VBTC允许通过LN和segwit批量提款：越南的一家交易所VBTC在最近[支持了闪电网络提币](https://blog.vbtc.exchange/2020/how-to-withdraw-bitcoin-lightning-network-tutorial-3)后，[增加了批量segwit提币选项](https://blog.vbtc.exchange/2021/batched-segwit-withdrawals-tutorial-5)。鼓励的segwit批量提现每周发生一次，目标在mempools上不太可能有大量交易积压的时间去做。

● Bitcoin Dev Kit v0.3.0 released: Rust wallet library Bitcoin Dev Kit announced its [v0.3.0 release](https://bitcoindevkit.org/blog/2021/01/release-v0.3.0/) including splitting out the CLI into its own repository. The recent [BDK v0.2.0](https://bitcoindevkit.org/blog/2020/12/release-v0.2.0/) release added Branch and Bound (BnB) coin selection, [descriptor](https://bitcoinops.org/en/topics/output-script-descriptors/) templates (including with the recently added sortedmulti), and more.
比特币开发工具包[v0.3.0](https://bitcoindevkit.org/blog/2021/01/release-v0.3.0/)发布：Rust钱包库Bitcoin Dev Kit宣布发布v0.3.0版本，包括将CLI拆分出自己的仓库。 最近的[BDK v0.2.0版本](https://bitcoindevkit.org/blog/2020/12/release-v0.2.0/)增加了分支和绑定(BnB)币的选择，[描述符](https://bitcoinops.org/en/topics/output-script-descriptors/)模板(包括最近增加的多排序)等。

Releases and release candidates
New releases and release candidates for popular Bitcoin infrastructure projects. Please consider upgrading to new releases or helping to test release candidates.
发布版本和发布候选版本
流行的比特币基础设施项目的新版本和候选版本。请考虑升级到新版本或帮助测试候选版本。

● [LND 0.12.1-beta.rc1](https://github.com/lightningnetwork/lnd/releases/tag/v0.12.1-beta.rc1) is a release candidate for a maintenance release of LND. It fixes an edge case that could lead to accidental channel closure and a bug that could cause some payments to fail unnecessarily, plus some other minor improvements and bug fixes.

Notable code and documentation changes
Notable changes this week in [Bitcoin Core](https://github.com/bitcoin/bitcoin), [C-Lightning](https://github.com/ElementsProject/lightning), [Eclair](https://github.com/ACINQ/eclair), [LND](https://github.com/lightningnetwork/lnd/), [Rust-Lightning](https://github.com/rust-bitcoin/rust-lightning), [libsecp256k1](https://github.com/bitcoin-core/secp256k1), [Hardware Wallet Interface (HWI)](https://github.com/bitcoin-core/HWI), [Rust Bitcoin](https://github.com/rust-bitcoin/rust-bitcoin), [BTCPay Server](https://github.com/btcpayserver/btcpayserver/), [Bitcoin Improvement Proposals (BIPs)](https://github.com/bitcoin/bips/), and [Lightning BOLTs](https://github.com/lightningnetwork/lightning-rfc/).
[LND 0.12.1-beta.rc1](https://github.com/lightningnetwork/lnd/releases/tag/v0.12.1-beta.rc1)是LND维护版的候选版本。它修复了一个在极端操作下可能导致意外地通道关闭的情况，以及一个可能导致不必要的支付失败的bug，还有一些其他的小改进和bug修复。
值得注意的代码和文件变化
本周[比特币核心](https://github.com/bitcoin/bitcoin)、[C-Lightning](https://github.com/ElementsProject/lightning)、[Eclair](https://github.com/ACINQ/eclair)、[LND](https://github.com/lightningnetwork/lnd/)、[Rust-Lightning](https://github.com/rust-bitcoin/rust-lightning)、[libsecp256k1](https://github.com/bitcoin-core/secp256k1)、[硬件钱包接口(HWI)](https://github.com/bitcoin-core/HWI)、[Rust比特币](https://github.com/rust-bitcoin/rust-bitcoin)、[BTCPay服务器](https://github.com/btcpayserver/btcpayserver/)、[比特币改进提案(BIPs)](https://github.com/bitcoin/bips/)和[Lightning BOLTs](https://github.com/lightningnetwork/lightning-rfc/)等方面的显著变化。

● [Bitcoin Core #20944](https://github.com/bitcoin/bitcoin/issues/20944) adds a new total_fee field to the object returned by the getmempoolinfo RPC and the mempool/info REST endpoint. total_fee indicates the sum of the transaction fees for all transactions currently in the mempool.
[Bitcoin Core #20944](https://github.com/bitcoin/bitcoin/issues/20944)在getmempoolinfo RPC和mempool/info REST端点返回的对象中增加了一个新的total_fee字段。 total_fee表示当前mempool中所有交易的交易费用总和。


● [LND #4909](https://github.com/lightningnetwork/lnd/issues/4909) adds new getmccfg and setmccfg RPCs that can, respectively, retrieve and temporarily change settings in LND’s mission control subsystem without restarting the daemon. Mission control uses information about past payment attempts to choose better routes for subsequent payment attempts.
[LND #4909](https://github.com/lightningnetwork/lnd/issues/4909)增加了新的getmccfg和setmccfg RPC，分别可以在不重启守护进程的情况下，检索和临时更改LND任务控制子系统中的设置。任务控制模块利用过去尝试付款的信息，为以后的付款尝试选择更好的路由。

● [Rust-Lightning #787](https://github.com/rust-bitcoin/rust-lightning/issues/787) ensures that channel closures due to error messages only happen when the peer who sent the message is the channel’s counterparty. Previously, it was possible for malicious peers to force-close any channel if they knew the channel id.
[Rust-Lightning #787](https://github.com/rust-bitcoin/rust-lightning/issues/787)确保只有当发送消息的节点是通道的交易方时，才会发生因错误消息导致的信道关闭。 以前，如果恶意节点知道通道id，就可以强制关闭任何通道。

● [BTCPay Server #2164](https://github.com/btcpayserver/btcpayserver/issues/2164) redesigns the wallet setup wizard, walking the user through setting up BTCPay’s internal wallet and optionally integrating it with the user’s own remote software or hardware wallet. This is the start of other redesign work on BTCPay’s interface.
[BTCPay Server #2164](https://github.com/btcpayserver/btcpayserver/issues/2164)重新设计了钱包设置向导，引导用户设置BTCPay的内部钱包，并可选择将其与用户自己的远程软件或硬件钱包整合。这是BTCPay界面重新设计的开始。

● [HWI #443](https://github.com/bitcoin-core/HWI/issues/443) adds support for signing multisig inputs with the BitBox02 hardware wallet.
[HWI #443](https://github.com/bitcoin-core/HWI/issues/443)增加了对用BitBox02硬件钱包多签签名输入的支持。

● [Bitcoin Core #19145](https://github.com/bitcoin/bitcoin/issues/19145) extends the gettxoutsetinfo RPC’s hash_type option to accept a new muhash parameter that will produce the [MuHash3072](https://bitcoinops.org/en/newsletters/2021/01/13/#bitcoin-core-19055) digest of the UTXO set at the current block height. This is an alternative to producing the default SHA256 digest of the UTXO set. When run this way, MuHash has to process the same amount as data as the SHA256 function, so there’s not expected to be any significant change in performance of the gettxoutsetinfo RPC, which can take up to several minutes to return on slow single-board computers. However, a previously calculated MuHash object can have elements added or removed from it relatively cheaply, so a future PR is expected to quickly calculate a MuHash summary of the UTXO set at each block, save those summaries in a simple database, and allow returning them in digest form almost instantly upon demand. This will also benefit the [AssumeUTXO](https://bitcoinops.org/en/topics/assumeutxo/) project, which relies on the ability of users to compare UTXO set hashes at selected past block heights.
比特币Core团队在[#19145](https://github.com/bitcoin/bitcoin/issues/19145)扩展了gettxoutsetinfo RPC的hash_type选项，来接受一个新的muhash参数，该参数将产生当前区块高度的UTXO集的[MuHash3072](https://bitcoinops.org/en/newsletters/2021/01/13/#bitcoin-core-19055)摘要。相对于默认产生UTXO集的SHA256摘要，这是另一种选择。更新完成后，MuHash要处理的数据量和SHA256函数一样，所以预计gettxoutsetinfo RPC的性能不会有明显的变化，在速度慢的单板电脑上，MuHash的返回时间可能需要几分钟。然而，一个先前计算过的MuHash对象可以相对便宜增加或者删除元素。因此，将来的PR（代码提交）有望快速计算每个块上设置的UTXO的MuHash摘要，将这些摘要保存在简单的数据库中，并允许根据需求，以摘要形式快速返回它们。这也将使[AssumeUTXO](https://bitcoinops.org/en/topics/assumeutxo/)项目受益，该项目依赖于用户对比过去不同区块的UTXO集的哈希的能力。

● [C-Lightning #4364](https://github.com/ElementsProject/lightning/issues/4364) changes how it notifies its channel partners about problems, separating existing error messages into true errors and those that are just warnings. The current [BOLT1](https://github.com/lightningnetwork/lightning-rfc/blob/master/01-messaging.md) specification requires that any error result in channels being closed (although this does not seem to be universally implemented), but [a proposed specification update](https://github.com/lightningnetwork/lightning-rfc/issues/834) introduces the warning message type that can allow for a more flexible response. Anyone interested may also wish to read a [post](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002964.html) to the Lightning-Dev mailing list this week by Carla Kirk-Cohen about extended error message descriptions, a topic she described as “related, but not directly relevant to a soft warning error.”
[C-Lightning＃4364](https://github.com/ElementsProject/lightning/issues/4364)更改了通知通道合作方的方式，将现有的错误消息分为真正的错误和仅是警告的错误。 当前的[BOLT1](https://github.com/lightningnetwork/lightning-rfc/blob/master/01-messaging.md)规范要求任何错误都会导致通道关闭（尽管这似乎并未普遍实现），但是一个[被提案的规范更新](https://github.com/lightningnetwork/lightning-rfc/issues/834)引入了警告消息类型，可以允许更灵活的响应。任何有兴趣的人也可能希望阅读Carla Kirk-Cohen本周在Lightning-Dev邮件列表中[发布](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-February/002964.html)的有关扩展错误消息说明的帖子，她将其描述为“与软警告错误相关但不直接相关的”主题。